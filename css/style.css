:root{
  --bg:#eef1f5;
  --ink:#0d1b2a;
  --muted:#516079;
  --panel:#ffffff;
  --line:#cfd6df;
  --brand:#002855;
  --accent:#0062ff;
}

*{box-sizing:border-box;margin:0;padding:0}

html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background:var(--bg);
  color:var(--ink);
}

/* ============== Header (if used) ============== */
header{
  background:var(--brand);
  color:#fff;
  padding:14px 16px 14px 48px; /* space for hamburger */
  text-align:center;
  position:relative;
  box-shadow:0 2px 4px rgb(0 0 0 / .3);
  z-index:10;
}
header h1{
  margin:0;
  font-size:18px;
  font-weight:600;
  letter-spacing:.3px;
  line-height:1.3;
}
header .subtitle{
  font-size:12px;
  font-weight:400;
  opacity:.8;
}

/* ============== Hamburguer / toggle ============== */
.hamburgerBtn,
#hamburgerBtn{
  position:relative; /* static in split layout */
  left:0;
  top:0;
  z-index:10000;
  width:32px;
  height:32px;
  border-radius:8px;
  border:1px solid rgba(0,0,0,.05);
  background:#eef2f7;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
  cursor:pointer;
  box-shadow:0 6px 18px rgb(0 0 0 / .08);
}
.hamburgerBtn span{
  display:block;
  width:18px;
  height:2px;
  background:#111827;
  border-radius:1px;
}

/* ============== Main shell ============== */
#layoutShell{
  display:grid;
  grid-template-columns:320px 6px minmax(0,1fr); /* controls | resizer | preview */
  min-height:100vh;
  background:var(--bg);
  color:var(--ink);
}

.sidebar-open #controls{transform:translateX(0)}
.sidebar-collapsed #controls{transform:translateX(-100%)}

/* ============== Sidebar wrapper / panel ============== */
#panelShell{display:contents} /* preview columns are outside aside */

#controls{
  background:var(--panel);
  border-right:1px solid var(--line);
  box-shadow:0 0 20px rgb(0 0 0 / .07);
  display:flex;
  flex-direction:column;
  min-height:0;
  overflow:auto;
  padding:0 14px 20px;
}

.appHeader{display:flex;align-items:center;gap:12px;padding:12px 0;position:sticky;top:0;background:#fff;z-index:5}

/* ============== Resizer ============== */
#panelResizer{
  width:6px;
  cursor:col-resize;
  background:transparent;
  position:relative;
}
#panelResizer::after{
  content:"";
  position:absolute;
  top:50%;
  left:2px;
  transform:translateY(-50%);
  width:2px;
  height:40px;
  border-radius:1px;
  background:var(--line);
}

/* ============== Controls content ============== */
.controlsHeader{
  background:var(--brand);
  color:#fff;
  padding:12px 14px;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
}

.controlsScrollArea{flex:1;overflow:auto;padding-bottom:160px}

.panelBlock,
.panelSection{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:12px;
  padding:12px;
  margin:10px 0;
  box-shadow:0 8px 20px rgb(0 0 0 / .04);
}

.panelTitle{font-size:13px;font-weight:700;color:var(--ink);margin-bottom:8px}
.fieldLabel{font-size:13px;font-weight:600;color:var(--ink);display:block;margin-bottom:6px}
.hintText{font-size:11px;line-height:1.3;color:var(--muted);margin-top:6px}

select,button,input{
  width:100%;
  margin-top:6px;
  padding:8px;
  border:1px solid var(--line);
  border-radius:10px;
  background:#f8fafc;
  font-family:inherit;
  font-size:13px;
  color:var(--ink);
}
button{
  cursor:pointer;
  background:#0f2a54;
  color:#fff;
  border-color:#163766;
}
button.ghost{background:#ffffff;color:var(--ink)}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.two .col{flex:1}

/* ============== Uniform list ============== */
.uniformList{display:flex;flex-direction:column;gap:8px}
.uniformOption{
  width:100%;
  text-align:left;
  background:#fff;
  border:1px solid var(--line);
  border-radius:8px;
  padding:10px 12px;
  font-family:inherit;
  cursor:pointer;
  position:relative;
  box-shadow:0 4px 12px rgb(0 0 0 / .03);
  transition:box-shadow .12s ease,border-color .12s ease,background .12s ease;
}
.uniformOption:hover{
  box-shadow:0 10px 24px rgb(0 0 0 / .07);
  border-color:var(--brand);
  background:rgba(0,40,85,.04);
}
.uniformOption.locked{
  cursor:not-allowed;
  opacity:.45;
  filter:grayscale(1);
  background:#f4f4f7;
  border-style:dashed;
  border-color:var(--line);
  box-shadow:none;
}

/* ============== Ribbon picker (cards) ============== */
.subsection-header{
  display:flex;justify-content:space-between;align-items:flex-start;gap:8px;margin-bottom:10px
}
.subsection-title{font-size:12px;font-weight:700;color:var(--ink);line-height:1.2}
.subsection-hint{font-size:11px;font-weight:400;color:var(--muted);line-height:1.3}

#ribbonGrid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
  gap:10px;
}
.ribbonCard{
  border:1px solid var(--line);
  border-radius:10px;
  background:#fff;
  box-shadow:0 4px 12px rgb(0 0 0 / .05);
  padding:10px;
  display:flex;
  flex-direction:column;
  font-size:12px;
  min-width:0;
}
.ribbonCard.hidden{display:none}

.ribbonHeader{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:8px;gap:8px}
.ribbonLeft{display:flex;align-items:flex-start;gap:8px}
.ribbonCheck input[type="checkbox"]{width:16px;height:16px;cursor:pointer}
.ribbonImg{width:60px;height:18px;background:#999;border-radius:3px;border:1px solid #000;flex-shrink:0;background-size:cover;background-position:center}
.ribbonName{font-size:12px;font-weight:600;color:var(--ink);line-height:1.2;word-break:break-word;flex:1}
.ribbonBody{display:flex;flex-direction:column;gap:6px}

.deviceField label{font-size:10px;font-weight:600;color:var(--muted);margin-bottom:2px;display:block}
.deviceField select{width:100%;font-size:12px;padding:6px 8px;border:1px solid var(--line);border-radius:8px;background:#fff;color:var(--ink);min-height:32px}

/* Device tool */
#deviceTool{
  margin-top:12px;border:1px solid var(--line);border-radius:10px;padding:10px;background:#fefefe;font-size:12px
}
#devicePicker{
  display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;font-size:12px
}

/* ============== Preview area ============== */
.canvasWrap{
  position:relative;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:16px;
  overflow:auto;
  background:var(--bg);
}
#uniformCanvas{
  position:relative;
  width:700px;
  height:900px;
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:12px;
  box-shadow:0 30px 60px rgb(0 0 0 / .12);
  overflow:hidden;
}
.layer{position:absolute;image-rendering:auto}
.drag-mode-on .ribbonTile{outline:1px dashed rgba(0,40,85,.6);cursor:move;z-index:3}
.dragging{opacity:.7}

/* Asset bin (hidden) */
#assets{display:none}

/* ============== Tooltip ============== */
#tooltip,
.tooltipBubble{
  position:fixed;
  z-index:9999;
  min-width:180px;
  max-width:240px;
  background:rgba(15,23,42,.95);
  color:#fff;
  font-size:12px;
  line-height:1.35;
  border-radius:8px;
  box-shadow:0 20px 40px rgb(0 0 0 / .6);
  padding:8px 10px;
  border:1px solid rgba(255,255,255,.2);
  pointer-events:none;
  display:none;
}
.tooltipBubble strong{font-size:12px;font-weight:600;color:#fff;display:block;margin-bottom:4px}
.tooltipBubble em{color:#94a3b8;font-style:normal;font-size:11px}

/* ============== Floating Rack Calibrator Drawer ============== */
#calibratorTab{
  position:fixed;
  right:8px;
  top:50%;
  transform:translateY(-50%);
  background:#fff;
  border:1px solid var(--line);
  border-right:0;
  border-radius:8px 0 0 8px;
  padding:8px 10px;
  cursor:pointer;
  z-index:20;
  display:flex;
  align-items:center;
  gap:6px;
  font-weight:700;
  color:var(--brand);
}
#calibratorPanel{
  position:fixed;
  right:0;
  top:0;
  bottom:0;
  width:320px;
  background:#ffffff;
  border-left:1px solid var(--line);
  display:none;
  z-index:25;
  overflow:auto;
}
.calHeader{display:flex;justify-content:space-between;font-weight:600}
.calGroup{border:1px solid var(--line);border-radius:10px;padding:10px;margin:10px;background:#f9fafc}
.calRow{display:grid;grid-template-columns:36px 1fr 62px;gap:8px;align-items:center;margin-top:8px}
.calVal{font-variant-numeric:tabular-nums;color:var(--muted)}
#calibrationExport{
  width:100%;
  min-height:160px;
  font-family:ui-monospace,SFMono-Regular,Consolas,monospace;
  font-size:12px;
  border:1px solid var(--line);
  border-radius:8px;
  padding:8px;
  background:#f6f8fa;
  resize:vertical;
}

/* ============== Footer ============== */
footer{padding:14px;color:var(--muted);text-align:left}

/* ============== Helpers ============== */
.hidden{display:none !important}
.smallText{font-size:11px;color:var(--muted)}
.ghost{opacity:.85;background:#fff;color:var(--ink)}
.uName{font-size:13px;font-weight:600;color:var(--ink);margin-bottom:2px;line-height:1.3}
.uDesc{font-size:11px;color:var(--muted);line-height:1.3}

/* ============== Mobile ============== */
@media (max-width: 1024px){
  #uniformCanvas{width:560px;height:800px}
}
@media (max-width: 768px){
  #layoutShell{
    grid-template-columns: 1fr; /* stack */
  }
  #controls{
    position:fixed;
    inset:0 20% 0 auto; /* slide-in from left */
    width:80%;
    max-width:480px;
    transform:translateX(-100%);
    transition:transform .2s ease;
    border-right:1px solid var(--line);
    border-radius:0;
    z-index:30;
  }
  .sidebar-open #controls{transform:translateX(0)}
  #panelResizer{display:none}
  .canvasWrap{padding:10px}
  #uniformCanvas{width:92vw;height:calc(92vw * 1.25);max-height:82vh}
  #calibratorPanel{width:86vw}
}
