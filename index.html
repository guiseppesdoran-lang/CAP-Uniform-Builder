
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CAP Class A Uniform Builder - Preview Version</title>
  <style>
    body { font-family: Arial; margin: 0; background: #e3e8ee; }
    #builder { display: flex; }
    #controls { width: 300px; padding: 1rem; background: #fff; border-right: 1px solid #ccc; }
    #canvasArea { flex-grow: 1; display: flex; justify-content: center; align-items: center; background: #d0d7de; position: relative; }
    #uniformCanvas { position: relative; width: 450px; height: 700px; background-color: white; }
    .layer { position: absolute; }
    select, button { width: 100%; margin: 0.5rem 0; padding: 0.4rem; }
  </style>
</head>
<body>
  <h1 style="text-align:center; background:#002855; color:white; margin:0; padding:1rem;">CAP Class A Uniform Builder</h1>
  <div id="builder">
    <div id="controls">
      <label for="jacketType">Select Gender</label>
      <select id="jacketType">
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
      <button onclick="changeJacket()">Change Jacket</button>

      <label for="ribbonSelect">Add Ribbon</label>
      <select id="ribbonSelect">
        <option value="mitchell_award">Mitchell Award</option>
        <option value="earhart_award">Earhart Award</option>
        <option value="spaatz_award">Spaatz Award</option>
      </select>
      <button onclick="addRibbon()">Add Ribbon</button>
    </div>
    <div id="canvasArea">
      <div id="uniformCanvas">
        <img id="jacketImage" src="images/base/jacket_male.png" class="layer" style="width:100%; height:auto;">
      </div>
    </div>
  </div>

  <script>
    let currentGender = "male";
    let ribbons = [];

    function changeJacket() {
      currentGender = document.getElementById("jacketType").value;
      const jacketImage = document.getElementById("jacketImage");
      jacketImage.src = "images/base/jacket_" + currentGender + ".png";
    }

    function addRibbon() {
      const select = document.getElementById("ribbonSelect");
      const value = select.value;
      if (ribbons.includes(value)) return;
      ribbons.push(value);

      const ribbon = document.createElement("img");
      ribbon.src = "images/ribbons/" + value + ".png";
      ribbon.className = "layer";
      const row = Math.floor((ribbons.length - 1) / 3);
      const col = (ribbons.length - 1) % 3;
      let left = 135 + col * 95;
      if (ribbons.length % 3 === 1 && ribbons.length === 1) left = 180;
      if (ribbons.length % 3 === 2 && ribbons.length <= 2) left = 135 + col * 95;
      ribbon.style.top = currentGender === "female" ? (215 + row * 33) + "px" : (200 + row * 33) + "px";
      ribbon.style.left = left + "px";
      ribbon.style.width = "90px";
      ribbon.style.height = "30px";
      document.getElementById("uniformCanvas").appendChild(ribbon);
    }
  </script>
</body>
</html>
